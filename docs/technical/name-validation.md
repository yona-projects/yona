URL의 path segment로 사용되는 상황에 대한 고려
==============================================

다음과 같이 URL의 path segment가 될 수 있는 이름들은,

* 프로젝트 이름
* 사용자 이름

알파벳, 숫자, `-`,  `.`,  `_`,  `~` 만으로 구성하는 것을 권장한다.

    name  = ALPHA / DIGIT / "-" / "." / "_" / "~"

왜 그래야 하는가
----------------

path segment가 될 수 있는 이름(사용자 이름, 프로젝트 이름 등)에 `/` 이나 `?` 같은 예약된 문자를 사용하면 [percent encoding](http://tools.ietf.org/html/rfc3986#section-2.1)이 되는 것을 피할 수 없다.

예를 들어 프로젝트 이름이 "엔포지" 라면, 프로젝트에 대한 url은 다음과 같이 만들어 질 것이다.

    http://nforge.com/foo/%EC%97%94%ED%8F%AC%EC%A7%80

이렇게 되면 아래와 같은 단점이 있다.

* nforge에서 디코딩을 빼먹으면 버그를 유발하게 됨
* nforge를 이용해 뭔가를 만들어보려는 개발자 입장에서도 percent encoding이 되는 상황을 고려해야 하는 것은 불편함
* 보기도 좋지 않음

예외
----

첨부파일 이름은 통제하기 어려우니 모든 문자를 사용할 수 있도록 허용.

파일 이름이나 디렉토리 이름이 될 수 있는 상황에 대한 고려
=========================================================

다음과 같이 파일이름이나 디렉토리 이름이 될 수 있는 모든 이름들은,

* 프로젝트 이름
* 사용자 이름

길이 제한
---------

ext 계열 파일시스템에서는 파일 이름의 길이를 255바이트, NTFS 에서는 UTF-16 255자로 제한하고 있다.

사용해서는 안되는 글자들
------------------------

ext 계열 파일시스템에서는 파일 이름에 `\0 /`를, MS 윈도에서는 `\ / : * ? " < > |`를 포함시킬 수 없다.

case insensitive
-----------------

중복 방지를 위한 이름 비교시 반드시 case insensitive 하게 비교해야 한다. 대소문자를 구분하지 않는 파일시스템(HFS+ 등)에서도 잘 동작하게 하기 위함이다. 다만 대소문자를 구분해서 표현하고자 하는 사용자의 요구를 만족하기 위해, 비교할때만 case insensitive하게 비교하고, 실제로 저장하거나 사용자에게 보여줄 때는 대소문자를 구분하도록 한다.

예외
----

MS-DOS나 Windows 3.1, Windows 95 등에서 사용하는, "FILENAME.TXT"와 같은 식의 8.3 filename(short filename)은 지원하지 않는 것으로 한다. Hive는 Oracle JRE의 [Certified System Configurations]((http://www.oracle.com/technetwork/java/javase/config-417990.html) 이외의 구성에서는 정상 동작하는 것을 보장하지 않는다.

기타 주의사항
-------------

* .으로 시작하는 파일은 hidden file로 인식될 수 있다.
* 파일 이름이 . 인 경우, 현재 디렉토리를 지칭하는 것으로 오해될 수 있다.
* 파일 이름이 .. 인 경우, 이전 디렉토리를 지칭하는 것으로 오해될 수 있다.
* -로 시작하는 파일은 쉘 명령에 인자로 사용될 경우 옵션으로 오해될 수 있다.

메일 주소의 local part로 사용되는 경우에 대한 고려
==================================================

[RFC 5322](http://tools.ietf.org/html/rfc5322)에 따르며 메일 주소는 다음과 같이 local-part와 domain으로 구성되는데,

    addr-spec       =   local-part "@" domain

[`dot-atom-text` 규칙](http://tools.ietf.org/html/rfc5322#section-3.2.3)에 의하면 local-part는 `.` 으로 시작하거나 끝날 수 없다. 즉 `foo.bar@mail.com`은 허용되나, `.foo@mail.com`나 `foo.@mail.com`은 금지된다.

다른 서비스와의 호환성에 대한 고려
==================================

github는 사용자 이름에 대한 validation 규칙은 매우 단순하다. github 사용자 이름에는 dash 혹은 alphanumeric이 포함될 수 있으나 dash로 시작할 수 없다.

반면 저장소 이름에 대한 규칙은 명확히 알려주지 않으므로 실험을 통해서 알아낼 수 밖에 없다. 확인해 본 결과 alphanumeric과 `-`, `_`, `.`를 사용할 수 있으며 그 이외의 문자는 `-`로 자동 변환된다. 또한 예외적으로 예약된 이름들이 있다. 예를 들어 저장소 이름을 `.`나 `..`라고 지을 수는 없다.

Hive가 Github의 저장소를 import하거나 혹은 반대의 상황이 가능하도록 하려면 가급적 서로의 이름규칙이 호환되도록 하는 것이 편하다.
